<ion-content>

  <ion-progress-bar *ngIf="isLoading" type="indeterminate"></ion-progress-bar>

  <div id="container">
    <div class="map" id="map_canvas"></div>
    <header class="header-search">
      <ion-searchbar 
        debounce="300" 
        mode="md"
        color="light"
        animated
        [(ngModel)]="searchText"
        (ionChange)="search($event)" 
        placeholder="Buscar Locais"></ion-searchbar>
      <ion-list *ngIf="filteredItems.length > 0 && isFiltered">
        <ion-item *ngFor="let establishment of filteredItems" (click)="selectEstablishment(establishment)">
          <ion-label>{{ establishment.nome }}</ion-label>
        </ion-item>
      </ion-list>
    </header>
    <div class="carrousel-box" *ngIf="!isLoading">
      <ion-scroll scrollX="true" style="white-space: nowrap; height: 250px; display: flex">
        <ion-card button="true" *ngFor="let establishment of establishments" (click)="selectEstablishment(establishment)">
          <img [src]="establishment.foto" class="background">
          <ion-card-content>
            <ion-card-title>{{ establishment.nome }}</ion-card-title>
            <ion-card-subtitle *ngIf="establishment.distance">
              <ion-icon name="location-outline"></ion-icon> {{ establishment.distance }} KM
            </ion-card-subtitle>
          </ion-card-content>
        </ion-card>
      </ion-scroll>
    </div>
  </div>
</ion-content>
